#version 150

uniform sampler2D Sampler0;
uniform sampler2D EntitySampler;
uniform vec2      ScreenSize;
uniform float     Time;

in vec2 texCoord;
out vec4 fragColor;

vec3 grayscale(vec3 color) {
    float avg = dot(color, vec3(0.299, 0.587, 0.114));
    return vec3(avg);
}

void main() {
    vec4 screenColor = texture(Sampler0, texCoord);

    vec4 entityGlow = texture(EntitySampler, texCoord);

    vec3 processedColor = grayscale(screenColor.rgb);

    processedColor *= vec3(0.9, 1.0, 0.9); // 약간 녹색 톤으로 변환

    if (entityGlow.a > 0.01) {
        processedColor = vec3(1.0, 1.0, 1.0);
    }
    fragColor = vec4(processedColor, screenColor.a);
}