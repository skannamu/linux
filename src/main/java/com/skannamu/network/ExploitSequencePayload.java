package com.skannamu.network;

import com.skannamu.skannamuMod;
import net.minecraft.network.PacketByteBuf;
import net.minecraft.network.codec.PacketCodec;
import net.minecraft.network.packet.CustomPayload;
import net.minecraft.util.Identifier;
import java.util.UUID;

public record ExploitSequencePayload(
        UUID targetUuid,
        int durationInTicks
) implements CustomPayload {

    public static final CustomPayload.Id<ExploitSequencePayload> ID = new CustomPayload.Id<>(Identifier.of(skannamuMod.MOD_ID, "exploit_sequence"));
    public static final PacketCodec<PacketByteBuf, ExploitSequencePayload> CODEC = PacketCodec.ofStatic(
            ExploitSequencePayload::write,
            ExploitSequencePayload::read
    );
    private static void write(PacketByteBuf buf, ExploitSequencePayload payload) {
        buf.writeUuid(payload.targetUuid());
        buf.writeInt(payload.durationInTicks());
    }
    private static ExploitSequencePayload read(PacketByteBuf buf) {
        UUID targetUuid = buf.readUuid();
        int durationInTicks = buf.readInt();
        return new ExploitSequencePayload(targetUuid, durationInTicks);
    }
    @Override
    public CustomPayload.Id<ExploitSequencePayload> getId() {
        return ID;
    }
}